<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>slydeGO! by @hiz</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600&family=Playfair+Display:ital,wght@0,400;0,600;0,700;1,400;1,600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
  
  <style>
    :root {
        --bg-dark: #000000;
        --bg-panel: #111827;
        --text-primary: #ffffff;
        --text-secondary: #cbd5e1;
        --accent-gold: #D4AF37;
        --border: #1f2937;
        --font-serif: 'Playfair Display', serif;
        --font-sans: 'Inter', sans-serif;
        --sidebar-width: 280px;
        --sidebar-mini-width: 80px;
    }

    * { box-sizing: border-box; }

    html, body {
      margin: 0; padding: 0; height: 100%; width: 100%;
      background: var(--bg-dark); overflow: hidden;
      font-family: var(--font-sans); color: var(--text-primary);
    }
    
    /* --- WELCOME BACKGROUND --- */
    #welcomeBgContainer { position: fixed; inset: 0; z-index: 0; display: block; }
    .bg-slideshow { position: absolute; inset: 0; z-index: 0; }
    .bg-slideshow div { 
        position: absolute; inset: 0; background-size: cover; background-position: center; 
        opacity: 0; animation: slideShowAnim 12s infinite; 
    }
    .bg-slideshow div:nth-child(1) { background-image: url('https://images.unsplash.com/photo-1519681393784-d120267933ba?q=80'); animation-delay: 0s; }
    .bg-slideshow div:nth-child(2) { background-image: url('https://images.unsplash.com/photo-1492684223066-81342ee5ff30?q=80'); animation-delay: 6s; }
    .bg-overlay { position: absolute; inset: 0; background: rgba(0,0,0,0.7); z-index: 1; }
    @keyframes slideShowAnim { 0% { opacity: 0; } 10% { opacity: 1; } 45% { opacity: 1; } 55% { opacity: 0; } }

    /* --- LOGIN SCREEN --- */
    #loginScreen { position: fixed; inset: 0; z-index: 1000; display: flex; align-items: center; justify-content: center; }
    #loginContentWrapper { 
        position: relative; width: 90%; max-width: 450px; padding: 50px 30px; text-align: center; 
        background: rgba(15, 23, 42, 0.7); backdrop-filter: blur(15px); border-radius: 24px; 
        border: 1px solid rgba(212, 175, 55, 0.3); box-shadow: 0 20px 50px rgba(0,0,0,0.5);
    }
    .login-title { font-family: var(--font-serif); font-size: clamp(2rem, 8vw, 2.8rem); font-weight: 700; margin-bottom: 5px; color: #fff; font-style: italic; }
    .login-subtitle { font-family: var(--font-sans); font-size: 0.7rem; letter-spacing: 3px; text-transform: uppercase; color: var(--accent-gold); margin-bottom: 30px; font-weight: 600; }
    .identity-input-group { margin-top: 20px; text-align: left; }
    .identity-input-group label { display: block; font-size: 0.75rem; color: var(--accent-gold); margin-bottom: 8px; font-weight: 600; text-transform: uppercase; }
    .identity-input-group input { 
        width: 100%; padding: 14px; border-radius: 12px; border: 1px solid rgba(212, 175, 55, 0.3);
        background: rgba(255,255,255,0.05); color: #fff; font-size: 1rem; outline: none; transition: 0.3s;
    }
    .time-card { display: inline-flex; flex-direction: column; align-items: center; padding: 12px 10px; margin: 0 4px; min-width: 65px; background: rgba(255,255,255,0.05); border: 1px solid rgba(212, 175, 55, 0.15); border-radius: 12px; }
    .time-number { font-family: var(--font-serif); font-size: 1.6rem; color: #fff; }
    .time-label { font-family: var(--font-sans); font-size: 0.6rem; color: var(--accent-gold); text-transform: uppercase; margin-top: 4px; }
    button.main-btn { margin-top: 25px; padding: 16px 40px; width: 100%; background: var(--accent-gold); color: #000; border: none; border-radius: 12px; font-weight: 700; text-transform: uppercase; cursor: pointer; transition: 0.3s; }

    /* --- LOADING OVERLAY --- */
    #loadingOverlay { position: fixed; inset: 0; z-index: 2000; background: #0f172a; display: none; flex-direction: column; align-items: center; justify-content: center; }
    .santa-container { width: 80%; max-width: 300px; position: relative; margin-bottom: 20px; }
    .santa-track { width: 100%; height: 4px; background: rgba(255,255,255,0.1); border-radius: 10px; overflow: hidden; }
    .santa-progress { width: 0%; height: 100%; background: var(--accent-gold); border-radius: 10px; transition: width 2.5s ease-in-out; }
    .santa-character { position: absolute; top: -40px; left: 0%; font-size: 2.5rem; transition: left 2.5s ease-in-out; transform: translateX(-50%); }

    /* --- MAIN APP CONTAINER --- */
    #mainContainer { display: none; height: 100%; width: 100%; position: relative; background: #000; flex-direction: row; }

    /* --- SIDEBAR --- */
    #sidebar {
      width: var(--sidebar-width); flex-shrink: 0; background: var(--bg-panel); 
      transition: width 0.4s cubic-bezier(0.16, 1, 0.3, 1); 
      display: flex; flex-direction: column; z-index: 100;
      border-right: 1px solid var(--border); position: relative;
      overflow: hidden;
    }
    
    #sidebar.mini { width: var(--sidebar-mini-width); }

    .sidebar-header {
        position: relative;
        padding: 30px 25px; 
        color: var(--accent-gold); 
        font-family: var(--font-serif); font-weight: 800; font-style: italic; font-size: 1.6rem; 
        border-bottom: 1px solid var(--border); white-space: nowrap;
        display: flex; 
        align-items: center; 
        min-height: 90px;
        transition: padding 0.4s ease;
    }
    
    .brand-text { transition: opacity 0.3s ease, transform 0.4s ease; display: inline-block; margin-right: 15px; }
    #sidebar.mini .brand-text { opacity: 0; transform: translateX(-30px); pointer-events: none; width: 0; margin-right: 0; }

    #sidebarToggle {
        width: 34px; height: 34px; display: flex; align-items: center; justify-content: center;
        cursor: pointer; font-size: 0.9rem; color: var(--text-secondary);
        background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
        border-radius: 8px; transition: all 0.4s cubic-bezier(0.16, 1, 0.3, 1); flex-shrink: 0;
    }
    #sidebarToggle:hover { background: rgba(212, 175, 55, 0.15); color: var(--accent-gold); border-color: var(--accent-gold); }
    #sidebar.mini .sidebar-header { justify-content: center; padding: 30px 0; }
    #sidebar.mini #sidebarToggle { transform: rotate(180deg); }

    .sidebar-content { flex: 1; overflow-y: auto; overflow-x: hidden; padding-top: 10px; }

    .nav-item {
      padding: 16px 25px; color: var(--text-secondary); cursor: pointer; display: flex; align-items: center;
      transition: all 0.2s ease; border-left: 4px solid transparent; text-decoration: none; white-space: nowrap;
    }
    .nav-item:hover, .nav-item.active { background: rgba(212, 175, 55, 0.05); color: var(--accent-gold); border-left-color: var(--accent-gold); }
    .nav-item .icon { font-size: 1.2rem; min-width: 30px; display: flex; justify-content: center; }
    .nav-item .label { font-size: 0.95rem; font-weight: 500; margin-left: 12px; transition: opacity 0.3s, transform 0.3s; }
    #sidebar.mini .label { opacity: 0; pointer-events: none; width: 0; transform: translateX(10px); }

    #logoutBtn { border-top: 1px solid var(--border); padding: 20px 25px; color: #f87171; cursor: pointer; display: flex; align-items: center; white-space: nowrap; }
    #sidebar.mini #logoutBtn .label { opacity: 0; }
    .sidebar-footer { padding: 20px; text-align: center; font-size: 0.8rem; color: #6b7280; border-top: 1px solid var(--border); white-space: nowrap; transition: opacity 0.3s; }
    #sidebar.mini .sidebar-footer { opacity: 0; pointer-events: none; height: 0; padding: 0; overflow: hidden; }

    #mobileMenuBtn {
        position: fixed; top: 15px; left: 15px; z-index: 150;
        width: 45px; height: 45px; border-radius: 12px;
        background: var(--bg-panel); color: var(--accent-gold);
        border: 1px solid var(--border); display: none;
        align-items: center; justify-content: center; cursor: pointer;
    }

    #contentArea { flex: 1; height: 100%; position: relative; overflow: hidden; background: #000; }
    .content-page { position: absolute; inset: 0; visibility: hidden; opacity: 0; transition: opacity 0.4s; z-index: 1; }
    .content-page.active { visibility: visible; opacity: 1; z-index: 5; }

    /* --- SLIDES FRAME --- */
    .slides-wrapper { position: absolute; inset: 0; background: #000; }
    .slide-frame { position: absolute; width: 100%; height: 100%; border: none; transition: opacity 0.8s; }
    .slide-active { z-index: 10; opacity: 1; }
    .slide-hidden { z-index: 5; opacity: 0; }

    /* --- TICKER --- */
    .news-ticker { 
        position: absolute; bottom: 0; left: 0; width: 100%; height: 40px; 
        background: rgba(17, 24, 39, 0.9); backdrop-filter: blur(10px);
        border-top: 1px solid var(--accent-gold); overflow: hidden; 
        display: none; z-index: 20; transform-origin: left;
        transition: transform 0.8s cubic-bezier(0.65, 0, 0.35, 1), opacity 0.5s;
    }
    .news-ticker.hide-anim { transform: scaleX(0); opacity: 0; }
    .ticker-label { position: absolute; left: 0; top: 0; bottom: 0; background: var(--accent-gold); color: #000; font-weight: 800; font-size: 0.75rem; padding: 0 15px; display: flex; align-items: center; z-index: 5; }
    .ticker-text-wrapper { padding-left: 0; width: 100%; overflow: hidden; position: relative; }
    .ticker-text { display: inline-block; white-space: nowrap; font-size: 1rem; font-weight: 600; line-height: 40px; padding-left: 100%; animation: marquee 10s linear infinite; }
    @keyframes marquee { 0% { transform: translateX(0); } 100% { transform: translateX(-200%); } }

    #fullScreenToggle {
        position: fixed; top: 15px; right: 15px; z-index: 150;
        width: 40px; height: 40px; border-radius: 50%;
        background: rgba(31, 41, 55, 0.6); color: #fff; border: 1px solid rgba(255,255,255,0.1);
        display: flex; align-items: center; justify-content: center; cursor: pointer; backdrop-filter: blur(5px);
    }

    /* --- CHAT STYLES --- */
    .chat-container { height: 100%; display: flex; flex-direction: column; background: #000; padding: 20px; padding-top: 70px; }
    #messages-list { flex: 1; overflow-y: auto; padding: 0; list-style: none; margin-bottom: 20px; }
    .msg-item { margin-bottom: 12px; }
    .msg-bubble { background: #1f2937; padding: 12px 16px; border-radius: 16px; border-bottom-left-radius: 4px; display: inline-block; max-width: 85%; }
    .msg-user { color: var(--accent-gold); font-size: 0.75rem; font-weight: 700; display: block; margin-bottom: 4px; }
    .msg-text { color: #fff; font-size: 0.9rem; line-height: 1.4; }
    .chat-input-area { display: flex; gap: 10px; background: #111827; padding: 10px; border-radius: 16px; border: 1px solid #374151; }
    .chat-input-area input { flex: 1; background: transparent; border: none; color: #fff; padding: 10px; outline: none; }
    .chat-send-btn { background: var(--accent-gold); color: #000; border: none; width: 45px; height: 45px; border-radius: 12px; cursor: pointer; font-size: 1.2rem; }

    @media (max-width: 992px) {
        #sidebar { position: fixed; left: -280px; height: 100%; width: 280px !important; }
        #sidebar.open { left: 0; }
        #sidebar #sidebarToggle { display: none; }
        #mobileMenuBtn { display: flex; }
    }
  </style>
</head>
<body>

  <div id="welcomeBgContainer">
    <div class="bg-slideshow"><div></div><div></div></div>
    <div class="bg-overlay"></div>
  </div>

  <div id="loginScreen">
    <div id="loginContentWrapper">
        <div class="login-title">Selamat Datang</div>
        <div class="login-subtitle">Slyde.Go Presentation</div>
        <div id="countdownSection" style="margin: 20px 0; display:flex; justify-content:center;">
            <div id="lockdownCountdownTimer"></div>
        </div>
        <div class="identity-input-group">
            <label for="participantName">Nama Lengkap / Identitas</label>
            <input type="text" id="participantName" placeholder="Masukkan nama Anda..." autocomplete="off">
        </div>
        <button id="guestEnterBtn" class="main-btn">Mulai Pengalaman</button>
    </div>
  </div>

  <div id="loadingOverlay">
      <div class="santa-container">
          <div class="santa-character" id="santaMover">ðŸŽ…</div>
          <div class="santa-track"><div class="santa-progress" id="santaProgress"></div></div>
      </div>
      <div class="loader-text" style="color: #94a3b8; font-size: 0.8rem; letter-spacing: 2px;">MENYIAPKAN PENGALAMAN...</div>
  </div>

  <div id="mainContainer">
    <button id="mobileMenuBtn"><i class="fas fa-bars"></i></button>
    <button id="fullScreenToggle"><i class="fas fa-expand"></i></button>

    <div id="sidebar">
        <div class="sidebar-header">
            <span class="brand-text">Slyde.Go</span>
            <div id="sidebarToggle" title="Toggle Sidebar"><i class="fas fa-chevron-left"></i></div>
        </div>
        <div class="sidebar-content">
            <div class="nav-item active" data-page="page-slides"><span class="icon"><i class="fas fa-tv"></i></span><span class="label">Presentasi</span></div>
            <div class="nav-item" data-page="page-chat"><span class="icon"><i class="fas fa-comments"></i></span><span class="label">Live Chat</span></div>
            <div class="nav-item" data-page="page-gallery"><span class="icon"><i class="fas fa-images"></i></span><span class="label">Galeri Foto</span></div>
            <div class="nav-item" data-page="page-about"><span class="icon"><i class="fas fa-info-circle"></i></span><span class="label">Tentang</span></div>
        </div>
        <div class="nav-item" id="logoutBtn"><span class="icon"><i class="fas fa-sign-out-alt"></i></span><span class="label">Keluar Acara</span></div>
        <div class="sidebar-footer">Slyde.Go <b>v2.5</b><br>by hizyourbae</div>
    </div>
    
    <div id="contentArea">
        <div id="page-slides" class="content-page active">
            <div class="slides-wrapper">
                <iframe id="frameA" class="slide-frame slide-active" allowfullscreen></iframe>
                <iframe id="frameB" class="slide-frame slide-hidden" allowfullscreen></iframe>
                <iframe id="youtubePlayer" class="slide-frame slide-hidden" allow="autoplay; encrypted-media" allowfullscreen></iframe>
            </div>
            <div id="newsTicker" class="news-ticker">
                <div class="ticker-label">ANNOUNCEMENT</div>
                <div class="ticker-text-wrapper"><div id="tickerText" class="ticker-text"></div></div>
            </div>
        </div>

        <div id="page-chat" class="content-page">
            <div class="chat-container">
                <ul id="messages-list"></ul>
                <div class="chat-input-area">
                    <input id="chatInput" placeholder="Ketik pesan publik..." autocomplete="off">
                    <button id="sendChatBtn" class="chat-send-btn"><i class="fas fa-paper-plane"></i></button>
                </div>
            </div>
        </div>
        
        <div id="page-gallery" class="content-page">
            <iframe src="https://drive.google.com/embeddedfolderview?id=1qo4DK7yUKaSXPtbCg2mirY4Tz_1-sp_o#grid" width="100%" height="100%" style="border:0; padding-top:60px;"></iframe>
        </div>

        <div id="page-about" class="content-page">
            <div style="height:100%; overflow-y:auto; padding:80px 40px; text-align:center;">
                <h1 style="font-family:var(--font-serif); font-size:2.5rem; color:var(--accent-gold);">Slyde.Go</h1>
                <p style="color:#94a3b8; max-width:500px; margin:20px auto;">Sistem presentasi interaktif berbasis Cloud.</p>
                <div style="margin-top:50px; background:#111827; padding:30px; border-radius:20px; display:inline-block;">
                    <img src="https://ui-avatars.com/api/?name=Hizkia&background=D4AF37&color=000" style="width:100px; height:100px; border-radius:50%; object-fit:cover; border:2px solid var(--accent-gold);">
                    <h3 style="margin-top:15px;">Hizkia Anindito</h3>
                    <p style="color:var(--accent-gold); font-size:0.8rem;">Developer & Designer</p>
                </div>
            </div>
        </div>
    </div>
  </div>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-app.js";
    import { getDatabase, ref, onValue, set, push, query, limitToLast, update } from "https://www.gstatic.com/firebasejs/10.14.1/firebase-database.js";

    const firebaseConfig = {
      apiKey: "AIzaSyB0sPJBi9ITypeztIhtfXwTT5bSc5LbVI8",
      authDomain: "testslide1.firebaseapp.com",
      databaseURL: "https://testslide1-default-rtdb.firebaseio.com",
      projectId: "testslide1",
      storageBucket: "testslide1.firebasestorage.app",
      messagingSenderId: "405700914757",
      appId: "1:405700914757:web:250c2b1e8ca958ca68bd2c"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    
    const slideRef = ref(db, "slide");
    const youtubeSyncRef = ref(db, "youtubeSync"); 
    const adminChatRef = ref(db, "chat/adminMessage");
    const participantChatRef = ref(db, "chat/participantMessages");
    const participantsRef = ref(db, "participants");

    const slideBase = "https://docs.google.com/presentation/d/e/2PACX-1vRW29GKiX5OJ6paiSw2lD654cT2qPhSb-VFCfK9K-PAHwNvDDKP-2J2XHahTwr3_aXkjpR1Fa-4M4-h/pubembed?rm=minimal&start=false&loop=false&delayms=0&slide=";
    
    let activeFrame = document.getElementById("frameA");
    let hiddenFrame = document.getElementById("frameB");
    const ytFrame = document.getElementById("youtubePlayer");
    let lastSlide = 0;
    let userName = localStorage.getItem('slydeGoUser') || "";

    window.onload = () => {
        startCountdown("2025-12-28 10:00:00");
        if (userName) enterApp();
    };

    document.getElementById("guestEnterBtn").onclick = () => {
        const inputName = document.getElementById("participantName").value.trim();
        if (!inputName) return alert("Harap masukkan nama Anda.");
        userName = inputName;
        localStorage.setItem('slydeGoUser', userName);
        document.getElementById("loginScreen").style.display = "none";
        const loading = document.getElementById("loadingOverlay");
        loading.style.display = "flex";
        setTimeout(() => { 
            document.getElementById("santaMover").style.left = "100%"; 
            document.getElementById("santaProgress").style.width = "100%"; 
        }, 100);
        setTimeout(() => { loading.style.opacity = "0"; setTimeout(() => { loading.style.display = "none"; enterApp(); }, 500); }, 2800);
    };

    function enterApp() {
        document.getElementById("welcomeBgContainer").style.display = "none";
        document.getElementById("loginScreen").style.display = "none";
        document.getElementById("mainContainer").style.display = "flex";
        
        const myPresenceRef = ref(db, `participants/${userName.replace(/\s/g, '_')}`);
        setInterval(() => { update(myPresenceRef, { name: userName, lastSeen: Date.now() }); }, 5000);

        initSlides();
        initYoutube();
        initTicker();
        initChat();
    }

    function initSlides() {
        onValue(slideRef, (snapshot) => {
            const data = snapshot.val();
            if (!data || data.current === lastSlide) return;
            hiddenFrame.src = slideBase + data.current;
            hiddenFrame.onload = () => {
                onValue(youtubeSyncRef, (ytSnap) => {
                    const ytData = ytSnap.val();
                    if (!ytData || !ytData.active) {
                        hiddenFrame.classList.replace('slide-hidden', 'slide-active');
                        activeFrame.classList.replace('slide-active', 'slide-hidden');
                        [activeFrame, hiddenFrame] = [hiddenFrame, activeFrame];
                    }
                }, { onlyOnce: true });
                lastSlide = data.current;
            };
        });
    }

    // --- REVISI: SINKRONISASI YOUTUBE (AUTO-MUTE & NO CONTROLS) ---
    function initYoutube() {
        onValue(youtubeSyncRef, (snapshot) => {
            const data = snapshot.val();
            if (data && data.active) {
                // Parameter: 
                // mute=1 (Tanpa suara agar autoplay jalan di Chrome)
                // controls=0 (Menghilangkan bar navigasi/slider durasi)
                // rel=0 (Tidak ada rekomendasi video lain)
                const embedUrl = `https://www.youtube.com/embed/${data.videoId}?autoplay=1&mute=1&controls=0&rel=0&modestbranding=1`;
                
                if (ytFrame.src !== embedUrl) ytFrame.src = embedUrl;
                
                ytFrame.classList.replace('slide-hidden', 'slide-active');
                activeFrame.classList.replace('slide-active', 'slide-hidden');
                hiddenFrame.classList.replace('slide-active', 'slide-hidden');
            } else {
                ytFrame.classList.replace('slide-active', 'slide-hidden');
                ytFrame.src = "";
                activeFrame.classList.replace('slide-hidden', 'slide-active');
            }
        });
    }

    function initTicker() {
        const q = query(adminChatRef, limitToLast(1));
        const ticker = document.getElementById("newsTicker");
        const text = document.getElementById("tickerText");
        let loopCount = 0; let lastMsg = "";

        if (text) {
            text.addEventListener('animationiteration', () => {
                loopCount++;
                if (loopCount >= 2) {
                    ticker.classList.add("hide-anim");
                    setTimeout(() => { ticker.style.display = "none"; }, 800);
                }
            });
        }

        onValue(q, (snapshot) => {
            const data = snapshot.val();
            if (data) {
                const msg = Object.values(data)[0].message;
                if (msg !== lastMsg) {
                    lastMsg = msg; loopCount = 0;
                    ticker.classList.remove("hide-anim");
                    ticker.style.display = "block";
                    text.innerText = msg;
                    text.style.animation = 'none'; text.offsetHeight; text.style.animation = null;
                }
            }
        });
    }

    function initChat() {
        const list = document.getElementById("messages-list");
        const input = document.getElementById("chatInput");
        const btn = document.getElementById("sendChatBtn");
        const sendMsg = () => {
            const val = input.value.trim();
            if (val) { push(participantChatRef, { name: userName, message: val, timestamp: Date.now() }); input.value = ""; }
        };
        if (btn) btn.onclick = sendMsg;
        if (input) input.onkeypress = (e) => { if(e.key === 'Enter') sendMsg(); };
        onValue(participantChatRef, (snapshot) => {
            const data = snapshot.val();
            if (!list) return;
            list.innerHTML = "";
            if (data) {
                Object.values(data).sort((a,b) => a.timestamp - b.timestamp).forEach(m => {
                    const li = document.createElement("li");
                    li.className = "msg-item";
                    li.innerHTML = `<div class="msg-bubble"><span class="msg-user">${m.name}</span><span class="msg-text">${m.message}</span></div>`;
                    list.appendChild(li);
                });
                list.scrollTop = list.scrollHeight;
            }
        });
    }

    const sidebar = document.getElementById("sidebar");
    document.getElementById("sidebarToggle").onclick = () => sidebar.classList.toggle("mini");
    document.getElementById("logoutBtn").onclick = () => { if (confirm("Keluar acara?")) { localStorage.removeItem('slydeGoUser'); window.location.reload(); } };
    document.getElementById("mobileMenuBtn").onclick = (e) => { e.stopPropagation(); sidebar.classList.toggle("open"); };

    document.querySelectorAll(".nav-item[data-page]").forEach(item => {
        item.onclick = function() {
            document.querySelectorAll(".nav-item").forEach(i => i.classList.remove("active"));
            document.querySelectorAll(".content-page").forEach(p => p.classList.remove("active"));
            this.classList.add("active");
            document.getElementById(this.dataset.page).classList.add("active");
            if (window.innerWidth <= 992) sidebar.classList.remove("open");
        }
    });

    document.getElementById("fullScreenToggle").onclick = () => {
        if (!document.fullscreenElement) document.documentElement.requestFullscreen();
        else document.exitFullscreen();
    };

    function startCountdown(targetDateString) {
        const timerEl = document.getElementById("lockdownCountdownTimer");
        const targetTime = new Date(targetDateString).getTime();
        const update = () => {
            const dist = targetTime - Date.now();
            if (dist < 0) { timerEl.innerHTML = "<b style='color:var(--accent-gold);'>EVENT TELAH DIMULAI</b>"; return; }
            const d = Math.floor(dist / (1000 * 60 * 60 * 24));
            const h = Math.floor((dist % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const m = Math.floor((dist % (1000 * 60 * 60)) / (1000 * 60));
            const s = Math.floor((dist % (1000 * 60)) / 1000);
            timerEl.innerHTML = `
                <div class="time-card"><span class="time-number">${d}</span><span class="time-label">Hari</span></div>
                <div class="time-card"><span class="time-number">${String(h).padStart(2, '0')}</span><span class="time-label">Jam</span></div>
                <div class="time-card"><span class="time-number">${String(m).padStart(2, '0')}</span><span class="time-label">Menit</span></div>
                <div class="time-card"><span class="time-number">${String(s).padStart(2, '0')}</span><span class="time-label">Detik</span></div>`;
        };
        update(); setInterval(update, 1000);
    }
  </script>
</body>
</html>